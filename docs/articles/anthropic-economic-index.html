<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Analyzing the Anthropic Economic Index • huggingfaceR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Inter-0.4.10/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analyzing the Anthropic Economic Index">
<link rel="icon" type="image/svg+xml" href="favicon/favicon.svg">
<meta property="og:image" content="https://farach.github.io/huggingfaceR/logo.svg">
<meta name="twitter:card" content="summary">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">huggingfaceR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-book-open"></span> Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started with huggingfaceR</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Core Capabilities</h6></li>
    <li><a class="dropdown-item" href="../articles/text-classification.html">Text Classification</a></li>
    <li><a class="dropdown-item" href="../articles/embeddings-and-similarity.html">Embeddings and Similarity</a></li>
    <li><a class="dropdown-item" href="../articles/llm-chat-and-generation.html">Chat and Generation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Workflows</h6></li>
    <li><a class="dropdown-item" href="../articles/hub-datasets-and-modeling.html">Hub, Datasets, and Modeling</a></li>
    <li><a class="dropdown-item" href="../articles/anthropic-economic-index.html">Anthropic Economic Index</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/farach/huggingfaceR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Analyzing the Anthropic Economic Index</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/farach/huggingfaceR/blob/main/vignettes/anthropic-economic-index.Rmd" class="external-link"><code>vignettes/anthropic-economic-index.Rmd</code></a></small>
      <div class="d-none name"><code>anthropic-economic-index.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">huggingfaceR</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org" class="external-link">readr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <a href="https://www.anthropic.com/research/anthropic-economic-index" class="external-link">Anthropic
Economic Index</a> tracks how AI is being integrated into real-world
economic tasks. Built from millions of Claude conversations mapped to
the U.S. Department of Labor’s O*NET occupational taxonomy, the dataset
provides granular measures of which tasks AI augments versus automates,
how usage varies across geographies, and what collaboration patterns
emerge between humans and AI.</p>
<p>This vignette demonstrates how to use huggingfaceR to analyze the
Anthropic Economic Index from the perspective of AI productivity
research. You will learn to:</p>
<ul>
<li>Load the dataset directly from the Hugging Face Hub</li>
<li>Apply semantic embeddings to occupational task descriptions</li>
<li>Discover latent structure in AI-affected tasks through
clustering</li>
<li>Measure semantic similarity between tasks and research concepts</li>
<li>Classify tasks along research-relevant dimensions using zero-shot
models</li>
<li>Visualize the embedding space of AI-impacted occupations</li>
</ul>
<p>These analyses illustrate a fundamental difference between
huggingfaceR and conversational LLM interfaces such as <a href="https://ellmer.tidyverse.org/" class="external-link">ellmer</a>. Where ellmer provides
an R6-based chat interface for interacting with language models one
prompt at a time, huggingfaceR operates as a programmatic analytical
toolkit: it embeds, classifies, clusters, and searches across entire
corpora in reproducible pipelines. The workflows below could not be
replicated through conversational prompting alone.</p>
</div>
<div class="section level2">
<h2 id="loading-the-dataset">Loading the Dataset<a class="anchor" aria-label="anchor" href="#loading-the-dataset"></a>
</h2>
<p>The Anthropic Economic Index is hosted as a file-based repository on
the Hugging Face Hub. Because its data files are stored as CSVs rather
than in the standard Datasets format, we load them directly via URL. The
<code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">readr::read_csv()</a></code> function handles this transparently.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">base_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://huggingface.co/datasets/Anthropic/EconomicIndex/"</span>,</span>
<span>  <span class="st">"resolve/main/release_2025_02_10/"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># O*NET task statements with occupational codes</span></span>
<span><span class="va">task_statements</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">base_url</span>, <span class="st">"onet_task_statements.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Task-level AI usage percentages</span></span>
<span><span class="va">task_usage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">base_url</span>, <span class="st">"onet_task_mappings.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Automation vs. augmentation breakdown</span></span>
<span><span class="va">auto_augment</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">base_url</span>, <span class="st">"automation_vs_augmentation.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Wage and occupation metadata</span></span>
<span><span class="va">wages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">base_url</span>, <span class="st">"wage_data.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The task statements file contains the core analytical unit: detailed
descriptions of what workers do in each occupation, drawn from the O*NET
database.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">task_statements</span></span>
<span><span class="co">#&gt; # A tibble: 19,530 x 8</span></span>
<span><span class="co">#&gt;    `O*NET-SOC Code` Title            `Task ID` Task          `Task Type`</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;            &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;</span></span>
<span><span class="co">#&gt;  1 11-1011.00       Chief Executives      8823 Direct or co~ Core</span></span>
<span><span class="co">#&gt;  2 11-1011.00       Chief Executives      8831 Appoint depa~ Core</span></span>
<span><span class="co">#&gt;  3 11-1011.00       Chief Executives      8825 Analyze oper~ Core</span></span>
<span><span class="co">#&gt;  ...</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="semantic-embeddings-of-occupational-tasks">Semantic Embeddings of Occupational Tasks<a class="anchor" aria-label="anchor" href="#semantic-embeddings-of-occupational-tasks"></a>
</h2>
<p>A core capability of huggingfaceR is converting text into dense
vector representations. By embedding O*NET task descriptions, we can
measure the semantic distance between any pair of tasks regardless of
their surface wording. This enables similarity search, clustering, and
dimensionality reduction across the full task taxonomy.</p>
<div class="section level3">
<h3 id="embedding-task-descriptions">Embedding Task Descriptions<a class="anchor" aria-label="anchor" href="#embedding-task-descriptions"></a>
</h3>
<p>Select a representative sample of tasks and compute their
embeddings.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Join task descriptions with their AI usage rates.</span></span>
<span><span class="co"># The task_mappings file uses lowercase task names, so we normalize case for</span></span>
<span><span class="co"># the join key.</span></span>
<span><span class="va">tasks_with_usage</span> <span class="op">&lt;-</span> <span class="va">task_statements</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span>task_id <span class="op">=</span> <span class="va">`Task ID`</span>, task <span class="op">=</span> <span class="va">Task</span>, title <span class="op">=</span> <span class="va">Title</span>,</span>
<span>         soc_code <span class="op">=</span> <span class="va">`O*NET-SOC Code`</span>, task_type <span class="op">=</span> <span class="va">`Task Type`</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>task_lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">task</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span></span>
<span>    <span class="va">task_usage</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>task_lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">task_name</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    by <span class="op">=</span> <span class="st">"task_lower"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">task_lower</span>, <span class="op">-</span><span class="va">task_name</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>ai_usage_pct <span class="op">=</span> <span class="va">pct</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Sample tasks across the usage distribution for analysis</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">sample_tasks</span> <span class="op">&lt;-</span> <span class="va">tasks_with_usage</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>usage_quartile <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/ntile.html" class="external-link">ntile</a></span><span class="op">(</span><span class="va">ai_usage_pct</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">usage_quartile</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate embeddings for each task description</span></span>
<span><span class="va">task_embeddings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hf_embed.html">hf_embed</a></span><span class="op">(</span><span class="va">sample_tasks</span><span class="op">$</span><span class="va">task</span><span class="op">)</span></span></code></pre></div>
<p>The result is a tibble with one row per task, a list-column of
numeric vectors, and the embedding dimensionality.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">task_embeddings</span></span>
<span><span class="co">#&gt; # A tibble: 200 x 3</span></span>
<span><span class="co">#&gt;    text                                          embedding     n_dims</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;                                         &lt;list&gt;         &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1 Direct or coordinate an organization's fin~   &lt;dbl [384]&gt;      384</span></span>
<span><span class="co">#&gt;  2 Develop or implement procedures for food s~   &lt;dbl [384]&gt;      384</span></span>
<span><span class="co">#&gt;  ...</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="measuring-task-similarity">Measuring Task Similarity<a class="anchor" aria-label="anchor" href="#measuring-task-similarity"></a>
</h3>
<p>With embeddings in hand, we can compute pairwise cosine similarity.
This reveals which tasks are semantically related, even when they belong
to different occupational categories.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compare a subset of tasks</span></span>
<span><span class="va">analytical_tasks</span> <span class="op">&lt;-</span> <span class="va">task_embeddings</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/hf_similarity.html">hf_similarity</a></span><span class="op">(</span><span class="va">analytical_tasks</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 45 x 3</span></span>
<span><span class="co">#&gt;    text_1                          text_2                       similarity</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;                           &lt;chr&gt;                             &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Direct or coordinate an org~    Analyze operations to eval~       0.82</span></span>
<span><span class="co">#&gt;  2 Direct or coordinate an org~    Develop or implement proce~       0.45</span></span>
<span><span class="co">#&gt;  ...</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="nearest-neighbor-search-for-research-concepts">Nearest Neighbor Search for Research Concepts<a class="anchor" aria-label="anchor" href="#nearest-neighbor-search-for-research-concepts"></a>
</h2>
<p>AI productivity researchers often want to identify which occupational
tasks are closest to abstract concepts such as “creative problem
solving” or “routine data entry.” The
<code><a href="../reference/hf_nearest_neighbors.html">hf_nearest_neighbors()</a></code> function performs this semantic
search against an embedded corpus.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Build an embedded document set using the tidytext-style interface</span></span>
<span><span class="va">task_docs</span> <span class="op">&lt;-</span> <span class="va">sample_tasks</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">task</span>, <span class="va">ai_usage_pct</span>, <span class="va">title</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/hf_embed_text.html">hf_embed_text</a></span><span class="op">(</span><span class="va">task</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Find tasks most similar to "writing and editing documents"</span></span>
<span><span class="fu"><a href="../reference/hf_nearest_neighbors.html">hf_nearest_neighbors</a></span><span class="op">(</span><span class="va">task_docs</span>, <span class="st">"writing and editing documents"</span>, k <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 5 x 5</span></span>
<span><span class="co">#&gt;    task                            ai_usage_pct title        embedding  similarity</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;                                  &lt;dbl&gt; &lt;chr&gt;        &lt;list&gt;          &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Write reports, memos, or othe~         0.38  Technical W~ &lt;dbl&gt;           0.91</span></span>
<span><span class="co">#&gt;  ...</span></span>
<span></span>
<span><span class="co"># Find tasks most similar to "quantitative data analysis"</span></span>
<span><span class="fu"><a href="../reference/hf_nearest_neighbors.html">hf_nearest_neighbors</a></span><span class="op">(</span><span class="va">task_docs</span>, <span class="st">"quantitative data analysis"</span>, k <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Find tasks most similar to "interpersonal communication"</span></span>
<span><span class="fu"><a href="../reference/hf_nearest_neighbors.html">hf_nearest_neighbors</a></span><span class="op">(</span><span class="va">task_docs</span>, <span class="st">"interpersonal communication"</span>, k <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>This approach lets researchers map their theoretical constructs onto
the empirical task taxonomy without manual coding. Compare this to a
conversational approach with ellmer, where you would need to prompt an
LLM with each of 19,000+ task descriptions individually. huggingfaceR
processes the entire corpus as a single batch operation.</p>
</div>
<div class="section level2">
<h2 id="clustering-tasks-by-semantic-content">Clustering Tasks by Semantic Content<a class="anchor" aria-label="anchor" href="#clustering-tasks-by-semantic-content"></a>
</h2>
<p>Beyond pairwise comparisons, researchers may want to discover latent
groupings in the task space. The <code><a href="../reference/hf_cluster_texts.html">hf_cluster_texts()</a></code>
function applies k-means clustering on the embedding vectors to identify
coherent task families.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cluster tasks into semantic groups</span></span>
<span><span class="va">clustered_tasks</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hf_cluster_texts.html">hf_cluster_texts</a></span><span class="op">(</span><span class="va">task_docs</span>, k <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span></span>
<span><span class="va">clustered_tasks</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">cluster</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span></span>
<span>    n_tasks <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    mean_ai_usage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">ai_usage_pct</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    example_task <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">first</a></span><span class="op">(</span><span class="va">task</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">mean_ai_usage</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 x 4</span></span>
<span><span class="co">#&gt;   cluster n_tasks mean_ai_usage example_task</span></span>
<span><span class="co">#&gt;     &lt;int&gt;   &lt;int&gt;         &lt;dbl&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1       3      28         0.312 Write and edit software code~</span></span>
<span><span class="co">#&gt; 2       1      38         0.189 Prepare reports summarizing~</span></span>
<span><span class="co">#&gt; ...</span></span></code></pre></div>
<div class="section level3">
<h3 id="extracting-cluster-topics">Extracting Cluster Topics<a class="anchor" aria-label="anchor" href="#extracting-cluster-topics"></a>
</h3>
<p>To interpret the clusters, <code><a href="../reference/hf_extract_topics.html">hf_extract_topics()</a></code>
identifies the most representative terms within each group. This
function clusters the data internally and extracts frequent terms per
cluster.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">task_docs</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/hf_extract_topics.html">hf_extract_topics</a></span><span class="op">(</span>text_col <span class="op">=</span> <span class="st">"task"</span>, k <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 x 2</span></span>
<span><span class="co">#&gt;   cluster topic_terms</span></span>
<span><span class="co">#&gt;     &lt;int&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1       1 prepare, reports, data, financial, ...</span></span>
<span><span class="co">#&gt; 2       2 develop, programs, training, ...</span></span>
<span><span class="co">#&gt; ...</span></span></code></pre></div>
<p>This unsupervised analysis may reveal that tasks with high AI usage
cluster around writing, analysis, and code, while low-usage tasks
cluster around physical operation, patient care, and equipment
maintenance.</p>
</div>
</div>
<div class="section level2">
<h2 id="zero-shot-classification-of-tasks">Zero-Shot Classification of Tasks<a class="anchor" aria-label="anchor" href="#zero-shot-classification-of-tasks"></a>
</h2>
<p>For hypothesis-driven research, you may want to classify tasks along
specific dimensions without training a supervised model. huggingfaceR’s
<code><a href="../reference/hf_classify_zero_shot.html">hf_classify_zero_shot()</a></code> applies a natural language
inference model to assign labels based on textual entailment.</p>
<div class="section level3">
<h3 id="cognitive-demand-classification">Cognitive Demand Classification<a class="anchor" aria-label="anchor" href="#cognitive-demand-classification"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Classify a sample of tasks by cognitive demand level</span></span>
<span><span class="va">cognitive_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"routine procedural work"</span>,</span>
<span>  <span class="st">"analytical reasoning"</span>,</span>
<span>  <span class="st">"creative problem solving"</span>,</span>
<span>  <span class="st">"interpersonal judgment"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">high_usage_tasks</span> <span class="op">&lt;-</span> <span class="va">sample_tasks</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ai_usage_pct</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">ai_usage_pct</span>, <span class="fl">0.75</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">task</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cognitive_classes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hf_classify_zero_shot.html">hf_classify_zero_shot</a></span><span class="op">(</span></span>
<span>  <span class="va">high_usage_tasks</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">]</span>,</span>
<span>  labels <span class="op">=</span> <span class="va">cognitive_labels</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cognitive_classes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_max</a></span><span class="op">(</span><span class="va">score</span>, n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">label</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 4 x 2</span></span>
<span><span class="co">#&gt;   label                        n</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                    &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 analytical reasoning        9</span></span>
<span><span class="co">#&gt; 2 creative problem solving    6</span></span>
<span><span class="co">#&gt; 3 routine procedural work     3</span></span>
<span><span class="co">#&gt; 4 interpersonal judgment      2</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="automation-potential-classification">Automation Potential Classification<a class="anchor" aria-label="anchor" href="#automation-potential-classification"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Classify tasks by automation potential</span></span>
<span><span class="va">automation_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"fully automatable by AI"</span>,</span>
<span>  <span class="st">"partially automatable with human oversight"</span>,</span>
<span>  <span class="st">"requires significant human judgment"</span>,</span>
<span>  <span class="st">"cannot be performed by AI"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">automation_classes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hf_classify_zero_shot.html">hf_classify_zero_shot</a></span><span class="op">(</span></span>
<span>  <span class="va">sample_tasks</span><span class="op">$</span><span class="va">task</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">]</span>,</span>
<span>  labels <span class="op">=</span> <span class="va">automation_labels</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare zero-shot predictions with actual AI usage rates</span></span>
<span><span class="va">automation_summary</span> <span class="op">&lt;-</span> <span class="va">automation_classes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">text</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_max</a></span><span class="op">(</span><span class="va">score</span>, n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>    <span class="va">sample_tasks</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">task</span>, <span class="va">ai_usage_pct</span><span class="op">)</span>,</span>
<span>    by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"text"</span> <span class="op">=</span> <span class="st">"task"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">automation_summary</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">label</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span></span>
<span>    n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    mean_actual_usage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">ai_usage_pct</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">mean_actual_usage</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>This analysis tests whether a zero-shot model’s assessment of
automation potential correlates with observed AI usage patterns in the
real world.</p>
</div>
</div>
<div class="section level2">
<h2 id="visualizing-the-task-embedding-space">Visualizing the Task Embedding Space<a class="anchor" aria-label="anchor" href="#visualizing-the-task-embedding-space"></a>
</h2>
<p>Dimensionality reduction provides a visual summary of how tasks
relate to each other in semantic space. Since we already computed
embeddings in <code>task_docs</code>, we can project them to 2D using
the <code>uwot</code> package directly, avoiding redundant API
calls.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jlmelville/uwot" class="external-link">uwot</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract the embedding matrix from pre-computed embeddings</span></span>
<span><span class="va">emb_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">task_docs</span><span class="op">$</span><span class="va">embedding</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Project to 2D with UMAP</span></span>
<span><span class="va">umap_coords</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://jlmelville.github.io/uwot/reference/umap.html" class="external-link">umap</a></span><span class="op">(</span><span class="va">emb_matrix</span>, n_neighbors <span class="op">=</span> <span class="fl">15</span>, min_dist <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build plot data</span></span>
<span><span class="va">plot_data</span> <span class="op">&lt;-</span> <span class="va">task_docs</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    umap_1 <span class="op">=</span> <span class="va">umap_coords</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span>,</span>
<span>    umap_2 <span class="op">=</span> <span class="va">umap_coords</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">plot_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">umap_1</span>, y <span class="op">=</span> <span class="va">umap_2</span>, color <span class="op">=</span> <span class="va">ai_usage_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.7</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_color_viridis_c</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"AI Usage %"</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent_format</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Semantic Map of O*NET Tasks by AI Usage"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"UMAP projection of task embeddings colored by AI adoption rate"</span>,</span>
<span>    x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="cn">NULL</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Tasks that cluster together in this projection share semantic
content. Color gradients within clusters indicate differential AI
adoption among semantically similar tasks, which may point to factors
beyond task content (such as industry norms or tool availability) that
influence adoption.</p>
<p>For quick one-off visualizations without pre-computed embeddings, you
can use <code><a href="../reference/hf_embed_umap.html">hf_embed_umap()</a></code> which handles embedding and
projection in a single call:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Alternative: hf_embed_umap() generates embeddings and projects in one step</span></span>
<span><span class="fu"><a href="../reference/hf_embed_umap.html">hf_embed_umap</a></span><span class="op">(</span><span class="va">sample_tasks</span><span class="op">$</span><span class="va">task</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="visualizing-clusters">Visualizing Clusters<a class="anchor" aria-label="anchor" href="#visualizing-clusters"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">plot_data</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">clustered_tasks</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">task</span>, <span class="va">cluster</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"task"</span><span class="op">)</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">umap_1</span>, y <span class="op">=</span> <span class="va">umap_2</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">cluster</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.7</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Task Clusters in Embedding Space"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"K-means clusters projected via UMAP"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Cluster"</span>,</span>
<span>    x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="cn">NULL</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="linking-ai-usage-to-wage-data">Linking AI Usage to Wage Data<a class="anchor" aria-label="anchor" href="#linking-ai-usage-to-wage-data"></a>
</h2>
<p>The AEI dataset includes occupational wage data, enabling researchers
to examine the relationship between AI adoption and compensation.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepare wage data</span></span>
<span><span class="va">occupation_wages</span> <span class="op">&lt;-</span> <span class="va">wages</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">MedianSalary</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="va">ChanceAuto</span> <span class="op">&gt;=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span>soc_code <span class="op">=</span> <span class="va">SOCcode</span>, job_name <span class="op">=</span> <span class="va">JobName</span>, job_family <span class="op">=</span> <span class="va">JobFamily</span>,</span>
<span>         median_salary <span class="op">=</span> <span class="va">MedianSalary</span>, chance_auto <span class="op">=</span> <span class="va">ChanceAuto</span>,</span>
<span>         job_zone <span class="op">=</span> <span class="va">JobZone</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Aggregate AI usage by occupation</span></span>
<span><span class="va">occupation_usage</span> <span class="op">&lt;-</span> <span class="va">tasks_with_usage</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">soc_code</span>, <span class="va">title</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span></span>
<span>    mean_ai_usage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">ai_usage_pct</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    n_tasks <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Join</span></span>
<span><span class="va">occupation_analysis</span> <span class="op">&lt;-</span> <span class="va">occupation_usage</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">occupation_wages</span>, by <span class="op">=</span> <span class="st">"soc_code"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">occupation_analysis</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">median_salary</span>, y <span class="op">=</span> <span class="va">mean_ai_usage</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"loess"</span>, se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/dollar_format.html" class="external-link">dollar_format</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent_format</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"AI Usage by Median Salary"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Median Annual Salary"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Mean AI Usage Rate (across tasks)"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="analyzing-collaboration-patterns">Analyzing Collaboration Patterns<a class="anchor" aria-label="anchor" href="#analyzing-collaboration-patterns"></a>
</h2>
<p>The AEI categorizes human-AI interactions into distinct collaboration
patterns: directive (human tells AI what to produce), feedback loop
(iterative refinement), learning (human seeks understanding), task
iteration (human builds on AI output), and validation (human checks AI
work). These map onto the broader distinction between automation
(directive, feedback loop) and augmentation (learning, task iteration,
validation).</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">auto_augment</span></span>
<span><span class="co">#&gt; # A tibble: 6 x 2</span></span>
<span><span class="co">#&gt;   interaction_type    pct</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;             &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 directive          22.6</span></span>
<span><span class="co">#&gt; 2 feedback loop      12.0</span></span>
<span><span class="co">#&gt; 3 learning           18.9</span></span>
<span><span class="co">#&gt; 4 none                2.9</span></span>
<span><span class="co">#&gt; 5 task iteration     25.5</span></span>
<span><span class="co">#&gt; 6 validation          2.3</span></span></code></pre></div>
<p>We can use zero-shot classification to validate whether these
interaction categories align with the semantic content of the tasks they
are associated with.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">interaction_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"giving direct instructions"</span>,</span>
<span>  <span class="st">"iterative refinement and feedback"</span>,</span>
<span>  <span class="st">"learning and understanding"</span>,</span>
<span>  <span class="st">"building upon previous output"</span>,</span>
<span>  <span class="st">"checking and validating work"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Classify a sample of task descriptions against interaction patterns</span></span>
<span><span class="va">interaction_classes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hf_classify_zero_shot.html">hf_classify_zero_shot</a></span><span class="op">(</span></span>
<span>  <span class="va">sample_tasks</span><span class="op">$</span><span class="va">task</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">]</span>,</span>
<span>  labels <span class="op">=</span> <span class="va">interaction_labels</span>,</span>
<span>  multi_label <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="geographic-analysis-with-the-v3-release">Geographic Analysis with the v3 Release<a class="anchor" aria-label="anchor" href="#geographic-analysis-with-the-v3-release"></a>
</h2>
<p>The September 2025 release adds geographic breakdowns of AI usage. We
can load this enriched data to explore how AI adoption varies across
countries and U.S. states.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v3_url</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://huggingface.co/datasets/Anthropic/EconomicIndex/"</span>,</span>
<span>  <span class="st">"resolve/main/release_2025_09_15/data/output/"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load enriched Claude.ai geographic data</span></span>
<span><span class="va">geo_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">v3_url</span>, <span class="st">"aei_enriched_claude_ai_2025-08-04_to_2025-08-11.csv"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Filter to country-level usage metrics</span></span>
<span><span class="va">country_usage</span> <span class="op">&lt;-</span> <span class="va">geo_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">geography</span> <span class="op">==</span> <span class="st">"country"</span>,</span>
<span>    <span class="va">facet</span> <span class="op">==</span> <span class="st">"onet_task"</span>,</span>
<span>    <span class="va">variable</span> <span class="op">==</span> <span class="st">"onet_task_pct"</span>,</span>
<span>    <span class="va">level</span> <span class="op">==</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">geo_id</span>, <span class="va">cluster_name</span>, <span class="va">value</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Identify top tasks per country</span></span>
<span><span class="va">top_tasks_by_country</span> <span class="op">&lt;-</span> <span class="va">country_usage</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">geo_id</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_max</a></span><span class="op">(</span><span class="va">value</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="embedding-geographic-task-profiles">Embedding Geographic Task Profiles<a class="anchor" aria-label="anchor" href="#embedding-geographic-task-profiles"></a>
</h3>
<p>Each country has a distribution of AI usage across tasks. We can
characterize national AI strategies by embedding the top tasks for each
country and computing inter-country similarity.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get unique tasks across top country profiles</span></span>
<span><span class="va">unique_geo_tasks</span> <span class="op">&lt;-</span> <span class="va">top_tasks_by_country</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">cluster_name</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">cluster_name</span><span class="op">)</span></span>
<span></span>
<span><span class="va">geo_task_embeddings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hf_embed.html">hf_embed</a></span><span class="op">(</span><span class="va">unique_geo_tasks</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For each country, compute a weighted average embedding</span></span>
<span><span class="co"># representing its AI usage profile</span></span>
<span><span class="va">country_profiles</span> <span class="op">&lt;-</span> <span class="va">top_tasks_by_country</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>    <span class="va">geo_task_embeddings</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">text</span>, <span class="va">embedding</span><span class="op">)</span>,</span>
<span>    by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cluster_name"</span> <span class="op">=</span> <span class="st">"text"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="comparison-with-conversational-approaches">Comparison with Conversational Approaches<a class="anchor" aria-label="anchor" href="#comparison-with-conversational-approaches"></a>
</h2>
<p>The analyses above illustrate capabilities that distinguish
huggingfaceR from conversational LLM packages like ellmer. Consider the
research question: “Which occupational tasks are most semantically
similar to creative writing, and how does their AI usage compare?”</p>
<div class="section level3">
<h3 id="the-huggingfacer-approach-programmatic-reproducible">The huggingfaceR approach (programmatic, reproducible)<a class="anchor" aria-label="anchor" href="#the-huggingfacer-approach-programmatic-reproducible"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Embed all 19,000+ task descriptions in batch</span></span>
<span><span class="va">all_embeddings</span> <span class="op">&lt;-</span> <span class="va">tasks_with_usage</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/hf_embed_text.html">hf_embed_text</a></span><span class="op">(</span><span class="va">task</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Find the 20 nearest neighbors to "creative writing"</span></span>
<span><span class="va">creative_tasks</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hf_nearest_neighbors.html">hf_nearest_neighbors</a></span><span class="op">(</span><span class="va">all_embeddings</span>, <span class="st">"creative writing"</span>, k <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Analyze their usage distribution</span></span>
<span><span class="va">creative_tasks</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span></span>
<span>    mean_usage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">ai_usage_pct</span><span class="op">)</span>,</span>
<span>    median_usage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">ai_usage_pct</span><span class="op">)</span>,</span>
<span>    sd_usage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">ai_usage_pct</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="the-conversational-approach-ellmer-or-similar">The conversational approach (ellmer or similar)<a class="anchor" aria-label="anchor" href="#the-conversational-approach-ellmer-or-similar"></a>
</h3>
<p>With a chat-based interface, the same analysis would require:</p>
<ol style="list-style-type: decimal">
<li>Manually prompting the LLM with each task description to assess
similarity (19,000+ API calls with unstructured text responses)</li>
<li>Parsing natural language responses into numeric similarity
scores</li>
<li>Handling rate limits, inconsistent outputs, and non-deterministic
responses</li>
<li>No guarantee of reproducibility across runs</li>
</ol>
<p>huggingfaceR’s embedding-based approach is deterministic, operates in
batch, and produces structured numeric output suitable for downstream
statistical analysis. The entire pipeline runs as a single reproducible
script.</p>
</div>
</div>
<div class="section level2">
<h2 id="research-applications">Research Applications<a class="anchor" aria-label="anchor" href="#research-applications"></a>
</h2>
<p>The combination of the Anthropic Economic Index with huggingfaceR’s
analytical tools supports several research directions:</p>
<p><strong>Task-level adoption modeling.</strong> Use embeddings as
features in regression models predicting AI usage rates, controlling for
occupation, wages, and task characteristics.</p>
<p><strong>Semantic distance and diffusion.</strong> Measure whether AI
adoption spreads to semantically adjacent tasks over time, using
longitudinal AEI releases.</p>
<p><strong>Skill taxonomy validation.</strong> Test whether unsupervised
clusters from embeddings align with established occupational
classification systems (SOC major groups).</p>
<p><strong>Cross-national specialization.</strong> Compare the embedding
centroids of top tasks across countries to characterize national AI
usage profiles.</p>
<p><strong>Automation boundary detection.</strong> Use zero-shot
classification and similarity search to identify the semantic frontier
between automatable and non-automatable tasks.</p>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>This vignette demonstrated how huggingfaceR enables programmatic
analysis of the Anthropic Economic Index:</p>
<table class="table">
<colgroup>
<col width="32%">
<col width="67%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Research Application</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="../reference/hf_embed.html">hf_embed()</a></code></td>
<td>Convert task descriptions to vector representations</td>
</tr>
<tr class="even">
<td><code><a href="../reference/hf_similarity.html">hf_similarity()</a></code></td>
<td>Measure semantic relatedness between tasks</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/hf_nearest_neighbors.html">hf_nearest_neighbors()</a></code></td>
<td>Map research concepts onto the task taxonomy</td>
</tr>
<tr class="even">
<td><code><a href="../reference/hf_cluster_texts.html">hf_cluster_texts()</a></code></td>
<td>Discover latent task groupings</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/hf_extract_topics.html">hf_extract_topics()</a></code></td>
<td>Interpret cluster content</td>
</tr>
<tr class="even">
<td><code><a href="../reference/hf_classify_zero_shot.html">hf_classify_zero_shot()</a></code></td>
<td>Classify tasks along arbitrary dimensions</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/hf_embed_umap.html">hf_embed_umap()</a></code></td>
<td>Visualize the task embedding space</td>
</tr>
</tbody>
</table>
<p>These operations run as reproducible batch pipelines over structured
data, producing tibbles suitable for statistical modeling and
visualization. This analytical approach complements conversational tools
by enabling the kind of corpus-scale, quantitative research that
individual prompts cannot support.</p>
</div>
<div class="section level2">
<h2 id="see-also">See Also<a class="anchor" aria-label="anchor" href="#see-also"></a>
</h2>
<ul>
<li>
<a href="getting-started.html">Getting Started</a> – installation
and authentication.</li>
<li>
<a href="embeddings-and-similarity.html">Embeddings, Similarity, and
Semantic Search</a> – detailed coverage of embedding functions.</li>
<li>
<a href="text-classification.html">Text Classification</a> –
zero-shot classification techniques.</li>
<li>
<a href="hub-datasets-and-modeling.html">Hub Discovery, Datasets,
and Tidymodels</a> – searching the Hub and building ML pipelines.</li>
<li>
<a href="https://www.anthropic.com/research/anthropic-economic-index" class="external-link">Anthropic
Economic Index</a> – official reports and methodology.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alex Farach, Sam Terfa, Jack Penzer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>NULL list(text = “View on GitHub”, href = “<a href="https://github.com/farach/huggingfaceR" class="external-link uri">https://github.com/farach/huggingfaceR</a>”)</p>
</div>

    </footer>
</div>





  </body>
</html>
